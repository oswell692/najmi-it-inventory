{% extends "base.html" %}

{% block title %}View Transfer Details - Najmi International{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-white py-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="card-title mb-0">
                            <i class="fas fa-eye me-2"></i>Transfer Details #{{ transfer.id }}
                        </h4>
                        <div class="btn-group">
                            <a href="{{ url_for('admin.edit_transfer', transfer_id=transfer.id) }}" 
                               class="btn btn-warning btn-sm">
                                <i class="fas fa-edit me-1"></i>Edit
                            </a>
                            <a href="{{ url_for('admin.transfer_history') }}" 
                               class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-arrow-left me-1"></i>Back
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Transfer Information -->
                    <div class="mb-4">
                        <h6 class="border-bottom pb-2 mb-3">Transfer Information</h6>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">From Station</label>
                                <p class="mb-2">{{ transfer.from_station_name }}</p>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">To Station</label>
                                <p class="mb-2">{{ transfer.to_station_name }}</p>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Transfer Date</label>
                                <p class="mb-2">{{ transfer.transfer_date.strftime('%B %d, %Y') }}</p>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Created At</label>
                                <p class="mb-2">
                                    {% if transfer.created_at %}
                                    {{ transfer.created_at.strftime('%B %d, %Y %I:%M %p') }}
                                    {% else %}
                                    N/A
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Equipment Information (from transfer record itself) -->
                    {% if transfer.item_name or transfer.equipment_name %}
                    <div class="mb-4">
                        <h6 class="border-bottom pb-2 mb-3">Item Details</h6>
                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label class="form-label fw-bold">Item Name</label>
                                <p class="mb-2">{{ transfer.item_name or transfer.equipment_name }}</p>
                            </div>
                        </div>
                        
                        {% if transfer.serial_number %}
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Serial Number</label>
                                <p class="mb-2">{{ transfer.serial_number }}</p>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if transfer.equipment_type or transfer.device_type %}
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Equipment Type</label>
                                <p class="mb-2">
                                    {% set eq_type = transfer.equipment_type or transfer.device_type %}
                                    <span class="badge 
                                        {% if eq_type == 'computer' %}bg-primary
                                        {% elif eq_type == 'printer' %}bg-success
                                        {% elif eq_type == 'monitor' %}bg-info
                                        {% else %}bg-secondary{% endif %}">
                                        {{ eq_type|title }}
                                    </span>
                                </p>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if transfer.brand %}
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Brand</label>
                                <p class="mb-2">{{ transfer.brand }}</p>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if transfer.model %}
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Model</label>
                                <p class="mb-2">{{ transfer.model }}</p>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}

                    <!-- Transfer Details -->
                    <div class="mb-4">
                        <h6 class="border-bottom pb-2 mb-3">Transfer Details</h6>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Transfer Reason</label>
                            <p class="mb-2">{{ transfer.transfer_reason }}</p>
                        </div>
                        {% if transfer.additional_notes %}
                        <div class="mb-3">
                            <label class="form-label fw-bold">Additional Notes</label>
                            <p class="mb-2">{{ transfer.additional_notes }}</p>
                        </div>
                        {% endif %}
                        {% if transfer.transferred_by %}
                        <div class="mb-3">
                            <label class="form-label fw-bold">Transferred By</label>
                            <p class="mb-2">{{ transfer.transferred_by }}</p>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-2">
                        <a href="{{ url_for('admin.transfer_history') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Back to History
                        </a>
                        <a href="{{ url_for('admin.edit_transfer', transfer_id=transfer.id) }}" 
                           class="btn btn-warning">
                            <i class="fas fa-edit me-2"></i>Edit Transfer
                        </a>
                        <form action="{{ url_for('admin.delete_transfer', transfer_id=transfer.id) }}" 
                              method="POST" class="ms-auto"
                              onsubmit="return confirm('Delete this transfer record?')">
                            <button type="submit" class="btn btn-outline-danger">
                                <i class="fas fa-trash me-2"></i>Delete
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}